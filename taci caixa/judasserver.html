<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">
<link rel="icon" href="assets/favicon.ico">

<title>TAS TestConsole suite</title>

<!-- TAS core CSS -->
<link href="css/tas-console.css" rel="stylesheet">

<!-- Custom styles for this template -->
<link href="css/theme.css" rel="stylesheet">

<!-- Bootstrap core CSS -->
<link href="css/bootstrap.css" rel="stylesheet">
<!-- Bootstrap theme -->
<link href="css/bootstrap-theme.css" rel="stylesheet">

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body style="padding-bottom: 0px;">

	<!--<script src="webLocal/js/external/jquery/jquery.js"></script>-->
	<script src="js/tas-console.js"></script>
	<script src="js/jquery-min.js"></script>
	<script src="js/jquery-ui.min.js"></script>
	<!-- Main jumbotron for a primary marketing message or call to action -->
	<div class="page-header">
		<h3>JUDAS SERVER TEST CONSOLE</h3>
	</div>

	<div class="row" style="width: 100%">
		<div class="col-sm-6">
			<label for="url">URL</label>
			<input type="text" id="url" style="width: 90%" value="ws://localhost:1714/orchestrator" />
		</div>
		<div class="col-sm-6">
			<button class="btn pull-right btn-sm btn-primary" style="width: 31%; margin: -3px 0px 0px 0px;" id="clearLog" onclick="clearLog()">Clear</button>
			<button class="btn pull-right btn-sm btn-primary" style="width: 31%; margin: -3px 5px 0px 0px;" id="disconnect" onclick="disconnect()">Disconnect</button>
			<button class="btn pull-right btn-sm btn-primary" style="width: 31%; margin: -3px 5px 0px 0px;" id="connect" onclick="connect()">Connect</button>
		</div>
	</div>

	<br />
	<div class="row" style="width: 100%">
		<div class="col-sm-12">
			<label for="mensaje">Message:</label>
			<br />
			<input type="text" id="mensaje" onchange="setMessage(this.value)" style="width: 80%" />
			<button class="btn pull-right btn-sm btn-success" style="width: 15%; margin-top: -3px;" id="sendMessage" onclick="sendMessage()">Send message</button>
		</div>
	</div>
	<br />
	<br />

	<div class="row" style="width: 100%">
		<div class="col-sm-4">
			<div class="list-group">
				<a class="list-group-item active">
					<strong>config</strong>
				</a>
				<a href="#" type="radio" class='list-group-item' onclick="setMessage(this.getAttribute('data-message'));" data-message='{"component":"judasServlet", "request":{"method":"setServerFilesPath","fields":[{"value":"/temp/versioninstall/judasserver"}]}}'> set download path </a>
				<a href="#" type="radio" class='list-group-item' onclick="setMessage(this.getAttribute('data-message'));"
					data-message='{"component":"judasServlet", "request":{"method":"addObserver","fields":[{"value":"ID1"},{"type":"CALLBACK","className":"com.caixabank.tas.basic.component.debug.judasserver.ICallbackJudasServer"}]}}'> register observer </a>

			</div>
		</div>
		<div class="col-sm-4">
			<div class="list-group">
				<a href="#" class="list-group-item active">
					<strong>Set response list</strong>
				</a>

				<select id="setMessageSelect" class="selectpicker form-control">
					<option data-message='' />
					<optgroup label="Package a">
						<option
							data-message='
{
	"component": "judasServlet",
	"request": {
		"method": "setResponsesList",
		"fields": [{
			"className": "java.util.ArrayList",
			"value": [{
				"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
				"response": "download",
				"responseObject": {
					"downloads": [{
						"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseDownload",
						"packageName": "package_a",
						"version": "A",
						"URL": "http://localhost:10003/download/package_aA.zip",
						"SHA1": "${SHA1}"
					}]
				}
			}]
		}]
	}
}
				'>Set
							Package a v.A</option>
						<option
							data-message='
{
	"component": "judasServlet",
	"request": {
		"method": "setResponsesList",
		"fields": [{
			"className": "java.util.ArrayList",
			"value": [{
				"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
				"response": "download",
				"responseObject": {
					"downloads": [{
						"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseDownload",
						"packageName": "package_a",
						"version": "B",
						"URL": "http://localhost:10003/download/package_aB.zip", 
						"SHA1": "${SHA1}"
					}]
				}
			}]
		}]
	}
}	
				'>Set
							Package a v.B</option>

						<option
							data-message='
{
	"component": "judasServlet",
	"request": {
		"method": "setResponsesList",
		"fields": [{
			"className": "java.util.ArrayList",
			"value": [{
				"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
				"response": "recall",
				"responseObject": {
					"time": 60
				}
			}]
		}]
	}
}							
				'>Set
							Recall</option>
					</optgroup>
					<!--  <optgroup label="Camping">
				    <option>Tent</option>
				    <option>Flashlight</option>
				    <option>Toilet Paper</option>
				  </optgroup> -->
				</select>

			</div>

		</div>


		<!-- /.col-sm-4 -->
		<div class="col-sm-4">
			<div class="list-group">
				<a href="#" class="list-group-item active">
					<strong>Add response</strong>
				</a>


				<select id="addMessageSelect" class="selectpicker form-control">
					<option data-message='' />
					<optgroup label="Package a">
						<option
							data-message='
{
	"component": "judasServlet",
	"request": {
		"method": "addResponse",
		"fields": [{
			"className": "com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
			"value": {
				"response": "download",
				"responseObject": {
					"downloads": [{
						"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseDownload",
						"packageName": "package_a",
						"version": "A",
						"URL": "http://localhost:10003/download/package_aA.zip",
						"SHA1": "${SHA1}"
					}]
				}
			}
		}]
	}
}
				'>Add
							Package a v.A</option>
						<option
							data-message='
{
	"component": "judasServlet",
	"request": {
		"method": "addResponse",
		"fields": [{
			"className": "com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
			"value": {
				"response": "download",
				"responseObject": {
					"downloads": [{
						"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseDownload",
						"packageName": "package_a",
						"version": "B",
						"URL": "http://localhost:10003/download/package_aB.zip", 
						"SHA1": "${SHA1}"
					}]
				}
			}
		}]
	}
}	
				'>Add
							Package a v.B</option>

						<option
							data-message='
{
	"component": "judasServlet",
	"request": {
		"method": "addResponse",
		"fields": [{
			"className": "com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
			"value": {
				"classType":"com.caixabank.tas.basic.component.debug.judasserver.model.ResponseJudasServer",
				"response": "recall",
				"responseObject": {
					"time": 60
				}
			}
		}]
	}
}							
				'>Add
							Recall</option>
					</optgroup>
					<!--  <optgroup label="Camping">
				    <option>Tent</option>
				    <option>Flashlight</option>
				    <option>Toilet Paper</option>
				  </optgroup> -->
				</select>


			</div>

		</div>



	</div>
	<hr>
	<div class="tabs" style="width: 100%">
		<button class="btn btn-sm btn-primary" style="width: 15%; margin-top: -3px;" id="hideMessages" onclick="showHideMessages()">Showing messages</button>
		<button class="btn btn-sm btn-primary" style="width: 10%; margin-top: -3px;" id="resetSent" onclick="resetCounter('sentCounter')">
			Sent Msg:
			<span class="badge" id="sentCounter">0</span>
		</button>
		<button class="btn btn-sm btn-primary" style="width: 10%; margin-top: -3px;" id="resetOK" onclick="resetCounter('okCounter')">
			OK Msg:
			<span class="badge" id="okCounter">0</span>
		</button>
		<button class="btn btn-sm btn-primary" style="width: 10%; margin-top: -3px;" id="resetEvents" onclick="resetCounter('okEvents')">
			OK Evt:
			<span class="badge" id="okEvents">0</span>
		</button>
		<button class="btn btn-sm btn-primary" style="width: 10%; margin-top: -3px;" id="resetError" onclick="resetCounter('errorCounter')">
			Error Msg:
			<span class="badge" id="errorCounter">0</span>
		</button>
		<button class="btn btn-sm btn-primary" style="width: 10%; margin-top: -3px;" id="resetAll" onclick="resetCounters('sentCounter','okCounter','okEvents','errorCounter');">Reset All</button>
	</div>
	<hr>
	<div style="border: 1px solid lightgray;">
		<div class="logAreaCSS" id="logArea" style="height: 800px;"></div>
	</div>
	<script>
		document.getElementById('url').value = 'ws://' + getServer() + ':1714/orchestrator';
		function prepareToShow(){
			adjustSizes();
		}
		function adjustSizes() {
			var theBottom = document.getElementById('logArea').getBoundingClientRect().bottom;
			parent.document.getElementById('divjudasserver').setAttribute('height', (theBottom + 30) + 'px')
		}
	</script>


	<script>
		$(function() {
			$('#setMessageSelect').on('change', function() {
				//var selected = $(this).find("option:selected").val();
				setMessage($(this).find("option:selected").attr("data-message").replace(/\t/g, ''));
			});
		});

		$(function() {
			$('#addMessageSelect').on('change', function() {
				//var selected = $(this).find("option:selected").val();
				setMessage($(this).find("option:selected").attr("data-message").replace(/\t/g, ''));
			});
		});

		/* $(document).ready(function()
		 {
		 var select = $(this);
		 //var url    = $(this).attr('data-url');
		 var list   = [];

		 alert("1");
		
		 $.getJSON("example.json", function(data)
		 {
		 alert("2");
		
		 $.each(data, function(key, val)
		 {
		 list.push('<option data-message="' + val.message + '">' + val.name + '</option>');
		 alert(val.name);
		 });

		 select.html(list.join(''));
		 select.selectpicker('refresh');
		 });
		 });
		 */
	</script>

</body>
</html>
